<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interacitve Fragment Shader</title>
    <link rel="icon" type="image/png" href="./assets/img/favicon-32.png" sizes="32x32">

    <style>
        #renderTargetIn svg {
            overflow: visible;
            z-index: 500;
            position: relative;
        }
    </style>

    <!--<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>-->

    <script src="js/PP.js"></script>    <!--TODO PP should not be implemented like that. Dependency library is necessary: Require.js-->
    <script src="lib/d3.js"></script>
    <script src="js/PP_Effects.js"></script>
    <script src="js/PP_Grids.js"></script>
    <script src="js/PP_Core.js"></script>

</head>
<body>

    <select name="renderTarget" id="select_renderTarget" onChange="PP.changeRenderTarget(this)">
        <option value="threeLayers_7x7">threeLayers_7x7</option>
        <option value="redVsBlue_9x7">redVsBlue_9x7</option>
    </select>

    <h2>Render Target In</h2>
    <div id="renderTargetIn">
        <!--JS generates Content-->
    </div>

    <h2>Render Target Out</h2>
    <div id="renderTargetOut">
        <!--JS generates Content-->
    </div>

<script>

    var effect = PP.Effect.blur_animated();

    // Define Render Target In
    PP.inGrid = PP.svgGrid(
        {
            width: 350,
            height: 350,
            squaresX: 7,
            squaresY: 7,
            cssSelector: "#renderTargetIn",
            colorArray: PP.Grids.threeLayers_7x7(),
            clickCallback: effect.animate.bind(effect)
//            clickCallback: PP.Effect.blur
        }
    );

    // Define Render Target Out
    PP.outGrid = PP.svgGrid(
        {
            width: 350,
            height: 350,
            squaresX: 7,
            squaresY: 7,
            cssSelector: "#renderTargetOut"
        }
    );

    var animateCount = 0;
    function animate ()
    {
        if ( animateCount>colorsIn.length ) {
            return;
        }
//        PP.Effect.blur(colorsIn[animateCount], animateCount, 7, 7);
        effect.animate(colorsIn[animateCount], animateCount, 7, 7);
        animateCount++;
        setTimeout(animate, 300);
    }

//    animate();

</script>

</body>
</html>